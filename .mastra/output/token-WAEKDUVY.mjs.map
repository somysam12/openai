{"version":3,"file":"token-WAEKDUVY.mjs","sources":["../../node_modules/@mastra/server/dist/token-WAEKDUVY.js"],"sourcesContent":["import { require_token_util } from './chunk-SIW6CYO3.js';\nimport { require_token_error } from './chunk-FZNS32WJ.js';\nimport { __commonJS } from './chunk-PR4QN5HX.js';\n\n// ../../node_modules/.pnpm/@vercel+oidc@3.0.1/node_modules/@vercel/oidc/dist/token.js\nvar require_token = __commonJS({\n  \"../../node_modules/.pnpm/@vercel+oidc@3.0.1/node_modules/@vercel/oidc/dist/token.js\"(exports, module) {\n    var __defProp = Object.defineProperty;\n    var __getOwnPropDesc = Object.getOwnPropertyDescriptor;\n    var __getOwnPropNames = Object.getOwnPropertyNames;\n    var __hasOwnProp = Object.prototype.hasOwnProperty;\n    var __export = (target, all) => {\n      for (var name in all)\n        __defProp(target, name, { get: all[name], enumerable: true });\n    };\n    var __copyProps = (to, from, except, desc) => {\n      if (from && typeof from === \"object\" || typeof from === \"function\") {\n        for (let key of __getOwnPropNames(from))\n          if (!__hasOwnProp.call(to, key) && key !== except)\n            __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n      }\n      return to;\n    };\n    var __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n    var token_exports = {};\n    __export(token_exports, {\n      refreshToken: () => refreshToken\n    });\n    module.exports = __toCommonJS(token_exports);\n    var import_token_error = require_token_error();\n    var import_token_util = require_token_util();\n    async function refreshToken() {\n      const { projectId, teamId } = (0, import_token_util.findProjectInfo)();\n      let maybeToken = (0, import_token_util.loadToken)(projectId);\n      if (!maybeToken || (0, import_token_util.isExpired)((0, import_token_util.getTokenPayload)(maybeToken.token))) {\n        const authToken = (0, import_token_util.getVercelCliToken)();\n        if (!authToken) {\n          throw new import_token_error.VercelOidcTokenError(\n            \"Failed to refresh OIDC token: login to vercel cli\"\n          );\n        }\n        if (!projectId) {\n          throw new import_token_error.VercelOidcTokenError(\n            \"Failed to refresh OIDC token: project id not found\"\n          );\n        }\n        maybeToken = await (0, import_token_util.getVercelOidcToken)(authToken, projectId, teamId);\n        if (!maybeToken) {\n          throw new import_token_error.VercelOidcTokenError(\"Failed to refresh OIDC token\");\n        }\n        (0, import_token_util.saveToken)(maybeToken, projectId);\n      }\n      process.env.VERCEL_OIDC_TOKEN = maybeToken.token;\n      return;\n    }\n  }\n});\nvar tokenWAEKDUVY = require_token();\n\nexport { tokenWAEKDUVY as default };\n//# sourceMappingURL=token-WAEKDUVY.js.map\n//# sourceMappingURL=token-WAEKDUVY.js.map"],"names":[],"mappings":"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","x_google_ignoreList":[0]}